// Mobile nav toggle
const navToggle = document.getElementById('navToggle');
const navMenu = document.getElementById('nav-menu');
if (navToggle && navMenu) {
  navToggle.addEventListener('click', () => {
    const open = navMenu.classList.toggle('open');
    navToggle.setAttribute('aria-expanded', String(open));
  });
}

// Reveal-on-scroll animations
const io = new IntersectionObserver((entries) => {
  entries.forEach((e) => {
    if (e.isIntersecting) {
      e.target.classList.add('is-visible');
      io.unobserve(e.target);
    }
  });
}, { threshold: 0.12 });

document.querySelectorAll('[data-animate]').forEach((el) => {
  const delay = el.getAttribute('data-animate-delay');
  if (delay) el.style.transitionDelay = `${delay}s`;
  io.observe(el);
});

// Header scroll progress bar
const bar = document.getElementById('scrollbarBar');
function onScroll(){
  const h = document.documentElement.scrollHeight - window.innerHeight;
  const p = h > 0 ? (window.scrollY || document.documentElement.scrollTop) / h : 0;
  if (bar) bar.style.width = `${Math.max(0, Math.min(1, p)) * 100}%`;
}
onScroll();
window.addEventListener('scroll', onScroll, { passive: true });

// Year in footer (if present)
const yearEl = document.getElementById('year');
if (yearEl) yearEl.textContent = new Date().getFullYear();
